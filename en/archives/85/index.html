<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="ðŸ“¢ This article was translated by gemini-2.5-flash Chapter 12: Managing Disks and Filesystems 12.1 Understanding Disk Storage The fundamental principles of data storage are similar across most modern operating systems. Disks serve as permanent storage, while RAM (Random Access Memory) and swap space are used for temporary storage. For instance, when you run a command, it&rsquo;s copied from the hard drive to RAM so the CPU (Central Processing Unit) can access it faster.\n"><title>Learning Linux Chapter 12: Managing Disks and Filesystems</title>
<link rel=canonical href=https://blog.yexca.net/en/archives/85/><link rel=stylesheet href=/scss/style.min.b7ec927dc4f5c6096c93ad78b7ef0d90969136f8e508f2ef88ae08d4df577bb6.css><meta property='og:title' content="Learning Linux Chapter 12: Managing Disks and Filesystems"><meta property='og:description' content="ðŸ“¢ This article was translated by gemini-2.5-flash Chapter 12: Managing Disks and Filesystems 12.1 Understanding Disk Storage The fundamental principles of data storage are similar across most modern operating systems. Disks serve as permanent storage, while RAM (Random Access Memory) and swap space are used for temporary storage. For instance, when you run a command, it&rsquo;s copied from the hard drive to RAM so the CPU (Central Processing Unit) can access it faster.\n"><meta property='og:url' content='https://blog.yexca.net/en/archives/85/'><meta property='og:site_name' content="yexca'Blog"><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='Linux'><meta property='article:tag' content='Reading Notes'><meta property='article:published_time' content='2023-01-03T13:37:48+08:00'><meta property='article:modified_time' content='2023-01-03T13:37:48+08:00'><meta name=twitter:site content="@yexcano"><meta name=twitter:creator content="@yexcano"><meta name=twitter:title content="Learning Linux Chapter 12: Managing Disks and Filesystems"><meta name=twitter:description content="ðŸ“¢ This article was translated by gemini-2.5-flash Chapter 12: Managing Disks and Filesystems 12.1 Understanding Disk Storage The fundamental principles of data storage are similar across most modern operating systems. Disks serve as permanent storage, while RAM (Random Access Memory) and swap space are used for temporary storage. For instance, when you run a command, it&rsquo;s copied from the hard drive to RAM so the CPU (Central Processing Unit) can access it faster.\n"><link rel="shortcut icon" href=/favicon.ico><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.yexca.net\/en\/archives\/85\/"},"headline":"Learning Linux Chapter 12: Managing Disks and Filesystems","name":"yexca'Blog","author":{"@type":"Person","name":"yexca"},"publisher":{"@type":"Person","name":"yexca'Blog"},"datePublished":"2023-01-03","dateModified":"2023-01-03","inLanguage":"en","description":"yexca\u0027s tech and life blog, writing about coding, projects, and daily thoughts."}</script><link rel=alternate hreflang=x-default href=https://blog.yexca.net/><link rel=alternate hreflang=zh-CN href=https://blog.yexca.net/><link rel=alternate hreflang=zh-TW href=https://blog.yexca.net/zh-tw/><link rel=alternate hreflang=ja href=https://blog.yexca.net/ja/><link rel=alternate hreflang=en href=https://blog.yexca.net/en/><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Noto+Sans+JP:wght@100..900&family=Noto+Sans+SC:wght@100..900&family=Noto+Sans+TC:wght@100..900&family=Yomogi&display=swap" rel=stylesheet></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/en/><img src=/img/avatar_hu16531030078560657968.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/en>yexca'Blog</a></h1><h2 class=site-description>Tech Otakus Change The World</h2></div></header><ol class=menu-social><li><a href=https://github.com/yexca target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:blog@yexca.net target=_blank title=Mail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://t.me/yexca target=_blank title=Telegram rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li><li><a href=/en/feed.xml target=_blank title=RSS rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/en/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/en/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/en/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/en/background/><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Background</span></a></li><li><a href=/en/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/en/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/en/support/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-coffee"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 14c.83.642 2.077 1.017 3.5 1 1.423.017 2.67-.358 3.5-1s2.077-1.017 3.5-1c1.423-.017 2.67.358 3.5 1"/><path d="M8 3A2.4 2.4.0 007 5a2.4 2.4.0 001 2"/><path d="M12 3a2.4 2.4.0 00-1 2 2.4 2.4.0 001 2"/><path d="M3 10h14v5a6 6 0 01-6 6H9a6 6 0 01-6-6v-5z"/><path d="M16.746 16.726a3 3 0 10.252-5.555"/></svg>
<span>Support</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://blog.yexca.net/>ç®€ä½“ä¸­æ–‡</option><option value=https://blog.yexca.net/zh-tw/>æ­£é«”ä¸­æ–‡</option><option value=https://blog.yexca.net/en/ selected>English</option><option value=https://blog.yexca.net/ja/>æ—¥æœ¬èªž</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#chapter-12-managing-disks-and-filesystems>Chapter 12: Managing Disks and Filesystems</a><ul><li><a href=#121-understanding-disk-storage>12.1 Understanding Disk Storage</a></li><li><a href=#122-partitioning-hard-drives>12.2 Partitioning Hard Drives</a></li><li><a href=#123-managing-partitions-with-logical-volume-management>12.3 Managing Partitions with Logical Volume Management</a></li><li><a href=#124-mounting-filesystems>12.4 Mounting Filesystems</a></li><li><a href=#125-managing-storage-with-cockpit>12.5 Managing Storage with Cockpit</a></li></ul></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/en/categories/technical-learning/>Technical Learning</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/en/archives/85/>Learning Linux Chapter 12: Managing Disks and Filesystems</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2023-01-03 13:37 +0800</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer><footer class=post-tags><svg class="icon icon-tabler icon-tabler-tag" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7v3l9 9 7-7-9-9H8A2 2 0 006 5"/><path d="M9 8h-.01"/></svg>
<a href=/en/tags/linux/ target=_blank class="tag badge badge-secondary post-meta-detail-tag">Linux</a>
<a href=/en/tags/reading-notes/ target=_blank class="tag badge badge-secondary post-meta-detail-tag">Reading Notes</a></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://blog.yexca.net/archives/85/ class=link>ç®€ä½“ä¸­æ–‡</a>
<a href=https://blog.yexca.net/zh-tw/archives/85/ class=link>æ­£é«”ä¸­æ–‡</a>
<a href=https://blog.yexca.net/ja/archives/85/ class=link>æ—¥æœ¬èªž</a></div></footer></div></header><section class=article-content><div class=notice><strong>ðŸ“¢</strong> This article was translated by gemini-2.5-flash</div><style lang=scss>.notice{padding:.75em 1em;margin:1em 0;border-left:4px solid;border-radius:4px;&.default { border-color: #ccc; background-color: #f9f9f9; color: #333; } &.info { border-color: #2196f3; background-color: #e3f2fd; color: #1a237e; } &.warn { border-color: #ff9800; background-color: #fff3e0; color: #e65100; } &.danger { border-color: #f44336; background-color: #ffebee; color: #b71c1c; }}[data-scheme=dark]{.notice { &.default { border-color: #666; background-color: #2a2a2a; color: #eee; } &.info { border-color: #90caf9; background-color: #1e3a5f; color: #e3f2fd; } &.warn { border-color: #ffb74d; background-color: #4e342e; color: #fff3e0; } &.danger { border-color: #ef5350; background-color: #3e2723; color: #ffebee; } }}[data-scheme=sepia]{.notice { &.info { border-color: #6a5acd; background-color: #fdf6e3; color: #3c2f2f; } &.warn { border-color: #e9967a; background-color: #faf0e6; color: #5c4033; } &.danger { border-color: #cd5c5c; background-color: #f5e0dc; color: #7b3f3f; } }}</style><h2 id=chapter-12-managing-disks-and-filesystems>Chapter 12: Managing Disks and Filesystems</h2><h3 id=121-understanding-disk-storage>12.1 Understanding Disk Storage</h3><p>The fundamental principles of data storage are similar across most modern operating systems. Disks serve as permanent storage, while RAM (Random Access Memory) and swap space are used for temporary storage. For instance, when you run a command, it&rsquo;s copied from the hard drive to RAM so the CPU (Central Processing Unit) can access it faster.</p><p>The CPU can access data from RAM much quicker than from the hard drive. However, because RAM is costly and data is lost when power is removed, disk capacity is far greater than RAM.</p><p>When RAM is full due to running too many processes or a process with a memory leak, if the system doesn&rsquo;t provide a way to extend memory, new processes will fail. This is where swap space comes in. Algorithms are used to move some data from RAM to disk, and then swap it back when needed.</p><blockquote><p>When you need to exchange files between different operating systems, the VFAT filesystem is commonly used.</p></blockquote><h3 id=122-partitioning-hard-drives>12.2 Partitioning Hard Drives</h3><p>Changing partitions can prevent your system from booting. It&rsquo;s recommended to practice with an empty drive until you&rsquo;re proficient before applying it to a live system.</p><h4 id=1221-understanding-partition-tables>12.2.1 Understanding Partition Tables</h4><p>Traditionally, PC architecture computers used MBR (Master Boot Record) partition tables to store information about hard drive partition sizes and layout. However, in recent years, a new standard called GUID (Globally Unique Identifier) Partition Table has been adopted on some UEFI-based computers, replacing the older BIOS system boot method.</p><p>The inherent limitations of the MBR specification led to the need for GUID partitions. MBR partitions are limited to 2TB, while GUID partitions can create partitions up to 9.4ZB.</p><p>The <code>fdisk</code> command doesn&rsquo;t support GPT partitions; you can use the <code>parted</code> command instead.</p><h4 id=1222-viewing-disk-partitions>12.2.2 Viewing Disk Partitions</h4><p><code>fdisk -l /dev/sda</code> or <code>parted -l /dev/sdb</code></p><ul><li><p>SCSI or USB storage devices, represented by <code>sd?</code> devices (e.g., <code>sda</code>, <code>sdb</code>), can have up to 16 minor devices (e.g., the primary <code>/dev/sdc</code> device and <code>/dev/sdc1</code> to <code>/dev/sdc15</code>), totaling 15 partitions.</p></li><li><p>NVMe SSD storage devices, represented by <code>nvme</code> devices (e.g., <code>nvme0</code>, <code>nvme1</code>), can be divided into one or more namespaces (most devices only use the first) and partitions. For example, <code>/dev/nvme0n1p1</code> refers to the first partition in the first namespace on the first NVMe device.</p></li><li><p>For x86 computers, a disk can have a maximum of 4 primary partitions. If you want more than 4 partitions, at least one must be an extended partition. Any partitions beyond the four primary ones are logical partitions, using space from the extended partition.</p></li></ul><h4 id=1223-creating-a-single-partition-drive>12.2.3 Creating a Single-Partition Drive</h4><p>The general process for adding a storage medium:</p><ol><li>Install the new hard drive or insert the new USB flash drive.</li><li>Partition the new hard drive.</li><li>Create a filesystem on the new hard drive.</li><li>Mount the filesystem.</li></ol><blockquote><p>If you&rsquo;re using the <code>parted</code> command for modifications, proceed with caution at each step, as <code>parted</code> changes take effect immediately.
The <code>fdisk</code> command, however, is reversible; changes are only applied when you explicitly confirm.</p><p>Data is invaluable, handle with care.</p></blockquote><ol><li><p>Determine the name of the newly added device.</p><p>There are many ways, for example, by checking system logs:
<code>journalctl -f</code></p><p>For example, let&rsquo;s assume the assigned name is <code>/dev/sdb</code>.</p></li><li><p>If the device is auto-mounted, you need to unmount it first.</p><p>Check if <code>/dev/sdb</code> is mounted: <code>mount | grep sdb</code></p><p>Unmount the partition: <code>umount /dev/sdb1</code></p></li><li><p>Use the <code>parted</code> command to create a partition.</p><p><code>parted /dev/sdb</code></p><p>After executing, you will be in <code>parted</code> command mode. You can use <code>parted</code> single-letter commands to manage partitions.</p></li><li><p>Delete a partition.</p><p>The single command <code>p</code> lists all partitions.</p><p>Use the <code>rm</code> command, then press Enter and input the corresponding <code>Number</code> to delete a partition.</p></li><li><p>Create a GPT partition table.</p><p>Use the command <code>mklabel gpt</code></p></li><li><p>Create a new partition.</p><p>Enter the <code>mkpart</code> command. The system will prompt you for the partition name, filesystem type, and then the start and end of the partition.</p><p>For example, name it <em>yexca-UDisk</em>, use <em>xfs</em> as the filesystem type, and partition from 1MB to 123GB:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>parted<span class=o>)</span> mkpart
</span></span><span class=line><span class=cl>Partition name? <span class=o>[]</span>? yexca-UDisk
</span></span><span class=line><span class=cl>File system type? <span class=o>[</span>ext2<span class=o>]</span>? xfs
</span></span><span class=line><span class=cl>Start? <span class=m>1</span>
</span></span><span class=line><span class=cl>End? 123GB
</span></span></code></pre></td></tr></table></div></div></li><li><p>Check if the partition was created correctly.</p><p>The single command <code>p</code> lists all partitions.</p></li><li><p>After the partition is created, you need to create a filesystem on it.</p><p>For example, to create an xfs filesystem: <code>mkfs -t xfs /dev/sdb1</code></p><p>If the <code>-t</code> option is omitted, an ext2 filesystem is created by default.</p></li><li><p>Mount the filesystem.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create the mount directory</span>
</span></span><span class=line><span class=cl>mkdir /mnt/tmp
</span></span><span class=line><span class=cl><span class=c1># Mount /dev/sdb1 to /mnt/tmp</span>
</span></span><span class=line><span class=cl>mount /dev/sdb1 /mnt/tmp
</span></span></code></pre></td></tr></table></div></div></li><li><p>Unmount the filesystem.</p><p>Use the command <code>umount /dev/sdb1</code></p><blockquote><p>By default, USB devices are generally auto-mounted when inserted.</p></blockquote><p>If you need to manually mount, add a line to <code>/etc/fstab</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/dev/sdb1    /mnt/tmp    xfs    defaults    <span class=m>0</span>  <span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div><p>This line has six fields:</p><ol><li>Partition</li><li>Mount directory</li><li>Filesystem type</li><li>Mount options at boot (e.g., <code>defaults</code> for default options)</li><li>Whether to use the <code>dump</code> command to back up partition files (0 for no backup)</li><li>Filesystem check order (0 for no check, 1 for root, 2 for others)</li></ol></li></ol><h4 id=1224-creating-a-multi-partition-disk>12.2.4 Creating a Multi-Partition Disk</h4><p>Using the <code>fdisk</code> command as an example:</p><ol><li><p>Enter <code>fdisk</code> command mode.</p><p><code>fdisk /dev/sdb</code></p></li><li><p>Create partitions.</p><p>Single command <code>n</code>, then choose <code>p</code> for a primary partition or <code>e</code> for an extended partition. Select the partition number (default is usually fine).</p><p>Then specify the allocated space. The starting sector can be default; after pressing Enter, input the ending space. For example, to allocate 5 GB, enter <code>+5G</code>. If you enter a bare number, it will be interpreted as sectors.</p><p>For the fourth partition, which would be an extended partition, you can accept the default for both start and end sectors.</p></li><li><p>Check partitions.</p><p>Single command <code>p</code>.</p></li><li><p>The default partition type is Linux. If you want to change the partition type:</p><p>Use command <code>t</code>, select the partition number, then enter <code>L</code> to view the list of partition types. Find the hexadecimal code, then enter it to change.</p></li><li><p>Review changes and save them.</p><p>Single command <code>p</code> to review, single command <code>w</code> to save changes.</p></li><li><p>After making changes, check if the kernel is aware of the partition table modifications.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep sdb /proc/partitions
</span></span><span class=line><span class=cl><span class=c1># If the expected output is not shown, execute the following command</span>
</span></span><span class=line><span class=cl>partprobe /dev/sdb
</span></span><span class=line><span class=cl><span class=c1># Check again</span>
</span></span><span class=line><span class=cl>grep sdb /proc/partitions
</span></span></code></pre></td></tr></table></div></div></li><li><p>Create filesystems.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create an ext4 filesystem</span>
</span></span><span class=line><span class=cl>mkfs -t ext4 /dev/sdb1
</span></span><span class=line><span class=cl><span class=c1># Create swap space</span>
</span></span><span class=line><span class=cl>mkswap /dev/sdb2
</span></span><span class=line><span class=cl><span class=c1># Create an ext2 filesystem (default)</span>
</span></span><span class=line><span class=cl>mkfs /dev/sdb3
</span></span><span class=line><span class=cl><span class=c1># Create a VFAT filesystem</span>
</span></span><span class=line><span class=cl>mkfs -t vfat /dev/sdb4
</span></span><span class=line><span class=cl><span class=c1># Make this partition an LVM physical volume</span>
</span></span><span class=line><span class=cl>pvcreate /dev/sdb5
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=123-managing-partitions-with-logical-volume-management>12.3 Managing Partitions with Logical Volume Management</h3><p>If disk space runs out, you might have to copy data to a larger disk, a process that requires downtime and is inefficient.</p><p>LVM (Logical Volume Management) provides a flexible and efficient way to handle changing storage requirements. With LVM, you can add physical disk partitions to a pool of space called a <em>volume group</em>. Logical volumes then allocate space from the volume group as needed.</p><h4 id=1231-checking-existing-lvm>12.3.1 Checking Existing LVM</h4><p>Use the command <code>fdisk -l /dev/sda</code> to check for existing Linux LVM partitions. Let&rsquo;s assume <code>/dev/sda2</code> is an LVM partition.</p><p>Check if this LVM partition is used in an LVM group:</p><p><code>pvdisplay /dev/sda2</code></p><p>Assuming the volume group (VG Name) is <code>vg_abc</code>, view the volume group information:</p><p><code>vgdisplay vg_abc</code></p><p>From this, you can see the PE (Physical Extent) Size, which is the minimum storage unit used by the physical volume.</p><p>View the allocation locations of the volume group&rsquo;s PEs:</p><p><code>lvdisplay vg_abc</code></p><p>The output will show multiple logical volume names. These logical volumes can be mounted directly by name, just like physical volumes.</p><p><img src=https://cdn.statically.io/gh/yexca/picx-images-hosting@master/2022/09-Linux%e5%ad%a6%e4%b9%a0/image.1cbhc31lxfvk.webp loading=lazy alt=image></p><h4 id=1232-creating-lvm-logical-volumes>12.3.2 Creating LVM Logical Volumes</h4><p>Using LVM logical volumes is a top-down process, while creating them is a bottom-up process. First, create one or more physical volumes (pv), then use the physical volumes to create a volume group (vg), and finally create logical volumes (lv) from the volume group.</p><ol><li><p>Prepare a storage device with an LVM partition.</p><p>The creation process was mentioned in 12.2.4.</p></li><li><p>Add this physical volume to a volume group.</p><p><code>vgcreate myvg0 /dev/sdb5</code></p></li><li><p>View the volume group.</p><p><code>vgdisplay myvg0</code></p></li><li><p>If the partition is 400M, you can use 396M of space (in 4M units).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create a logical volume from a portion of the volume group space, e.g., create a 1G logical volume</span>
</span></span><span class=line><span class=cl>lvcreate -n name -L 1G myvg0
</span></span><span class=line><span class=cl><span class=c1># Check if the logical volume exists</span>
</span></span><span class=line><span class=cl>ls /dev/mapper/myvg0*
</span></span><span class=line><span class=cl><span class=c1># If the following output is shown, creation was successful</span>
</span></span><span class=line><span class=cl>/dev/mapper/myvg0-name
</span></span></code></pre></td></tr></table></div></div></li><li><p>Create a filesystem and mount it.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create an ext4 filesystem</span>
</span></span><span class=line><span class=cl>mkfs -t ext4 /dev/mapper/myvg0-name
</span></span><span class=line><span class=cl><span class=c1># Create a mount directory</span>
</span></span><span class=line><span class=cl>mkdir /mnt/tmp
</span></span><span class=line><span class=cl><span class=c1># Mount</span>
</span></span><span class=line><span class=cl>mount /dev/mapper/myvg0-name /mnt/tmp
</span></span><span class=line><span class=cl><span class=c1># Check if mounting was successful</span>
</span></span><span class=line><span class=cl>df -h /mnt/tmp
</span></span></code></pre></td></tr></table></div></div></li><li><p>Alternatively, you can add an entry to <code>/etc/fstab</code> for automatic mounting.</p></li></ol><h4 id=1233-extending-lvm-logical-volumes>12.3.3 Extending LVM Logical Volumes</h4><p>If you run out of space on a logical volume, you can add space without unmounting it. To do this, the volume group must have available space, and then you can extend the logical volume.</p><ol><li><p>Check remaining space.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check available space in the volume group</span>
</span></span><span class=line><span class=cl>vgdisplay myvg0
</span></span><span class=line><span class=cl><span class=c1># Check available space in the logical volume</span>
</span></span><span class=line><span class=cl>df -h /mnt/tmp
</span></span></code></pre></td></tr></table></div></div></li><li><p>Extend the logical volume.</p><p><code>lvextend -L +1G /dev/mapper/myvg0-name</code></p></li><li><p>Resize the filesystem.</p><p><code>resize2fs -p /dev/mapper/myvg0-name</code></p></li><li><p>Check if resizing was successful.</p><p><code>df -h /mnt/tmp</code></p></li></ol><h3 id=124-mounting-filesystems>12.4 Mounting Filesystems</h3><p>In fact, the <code>mount</code> command and automatic mount configuration (the <code>/etc/fstab</code> file) have already been covered in the previous two sections.</p><h4 id=1241-supported-filesystems>12.4.1 Supported Filesystems</h4><p>Enter the command <code>cat /proc/filesystems</code> to view supported filesystem types. The following is just a partial list:</p><div class=table-wrapper><table><thead><tr><th>Filesystem</th><th>Description</th></tr></thead><tbody><tr><td>ext4</td><td>Successor to the popular ext3 filesystem. Supports volumes up to 1EB and files up to 16 TB.</td></tr><tr><td>iso9660</td><td>Evolved from the High Sierra filesystem (the original standard for CD-ROMs). Data CD-ROMs typically use this filesystem.</td></tr><tr><td>Minix</td><td>Originally used for the Minix version of UNIX. Supports filenames with a maximum of 30 characters.</td></tr><tr><td>msdos</td><td>MS-DOS filesystem type, can be used to mount floppies from Windows operating systems.</td></tr><tr><td>vfat</td><td>Microsoft&rsquo;s extended FAT filesystem type.</td></tr><tr><td>exfat</td><td>An extended FAT filesystem optimized for SD cards, USB drives, and other flash memory.</td></tr><tr><td>proc</td><td>Not a true filesystem. It&rsquo;s a Linux kernel filesystem interface. The <code>/proc</code> mount point should be a <code>proc</code> filesystem. Many utilities rely on <code>/proc</code> to access Linux kernel information.</td></tr><tr><td>ReiserFS</td><td>A journaling filesystem. Once the default filesystem for several Linux distributions, but now ext and xfs are more common.</td></tr><tr><td>swap</td><td>Used for swap partitions.</td></tr><tr><td>squashfs</td><td>A compressed and read-only filesystem type.</td></tr><tr><td>NFS</td><td>Network Filesystem, used to mount filesystems on other Linux or UNIX computers.</td></tr><tr><td>ntfs</td><td>Windows NT filesystem.</td></tr><tr><td>xfs</td><td>A high-performance filesystem originally developed by Silicon Graphics, excellent for handling large files.</td></tr><tr><td>gfs2</td><td>A shared-disk filesystem that allows multiple computers to use a shared disk to communicate without going through a network filesystem layer, such as CIFS, NFS, etc.</td></tr></tbody></table></div><p>Enter <code>man fs</code> to learn more about Linux filesystem-related information.</p><h4 id=1242-enabling-swap-space>12.4.2 Enabling Swap Space</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># View the number of swap partitions</span>
</span></span><span class=line><span class=cl>free -m
</span></span><span class=line><span class=cl><span class=c1># Create a swap partition</span>
</span></span><span class=line><span class=cl>mkswap /var/opt/myswap
</span></span><span class=line><span class=cl><span class=c1># Enable the swap partition</span>
</span></span><span class=line><span class=cl>swapon /var/opt/myswap
</span></span></code></pre></td></tr></table></div></div><p>If you&rsquo;ve added a swap partition entry to <code>/etc/fstab</code>, such as:</p><p><code>/var/opt/myswap swap swap defaults 0 0</code></p><p>You can enable it using <code>swapon -a</code>.</p><h4 id=1243-disabling-swap-space>12.4.3 Disabling Swap Space</h4><p><code>swapoff /var/opt/myswap</code></p><h4 id=1244-defining-mountable-filesystems-with-fstab>12.4.4 Defining Mountable Filesystems with fstab</h4><p>As introduced in 12.2.3, the second field can use UUID instead of the device name, because device names can change.</p><p>View UUIDs: <code>blkid</code></p><h4 id=1245-mounting-filesystems-with-the-mount-command>12.4.5 Mounting Filesystems with the mount Command</h4><p>Also introduced in 12.2.3.</p><h4 id=1246-mounting-disk-images-in-loopback-mode>12.4.6 Mounting Disk Images in Loopback Mode</h4><p>This involves mounting an ISO image file.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create a mount directory</span>
</span></span><span class=line><span class=cl>mkdir /mnt/tmp
</span></span><span class=line><span class=cl><span class=c1># Mount</span>
</span></span><span class=line><span class=cl>mount -o loop name.iso /mnt/tmp
</span></span></code></pre></td></tr></table></div></div><h4 id=1247-using-the-umount-command>12.4.7 Using the umount Command</h4><p>You can specify either the device partition name or the directory name.</p><p>Device partition name: <code>umount /dev/sdb1</code></p><p>Directory name: <code>umount /mnt/tmp</code></p><p>Typically, it&rsquo;s better to use the directory name.</p><p>If a directory is busy and cannot be unmounted, you can:</p><ul><li>Lazy unmount: <code>umount -l</code></li><li>Force unmount: <code>umount -f</code></li></ul><h3 id=125-managing-storage-with-cockpit>12.5 Managing Storage with Cockpit</h3><p>GUI. Refer to Chapter 8 for activation.</p></section><footer class=article-footer><section class=article-tags><a href=/en/tags/linux/>Linux</a>
<a href=/en/tags/reading-notes/>Reading Notes</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>This post is licensed under CC BY-NC-SA 4.0 by the author.</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/en/archives/84/><div class=article-details><h2 class=article-title>Linux Learning Chapter 11: Managing User Accounts</h2></div></a></article><article><a href=/en/archives/83/><div class=article-details><h2 class=article-title>Linux Learning Chapter 10: Getting and Managing Software</h2></div></a></article><article><a href=/en/archives/82/><div class=article-details><h2 class=article-title>Linux Learning Chapters 8 & 9: System Administration and Installing Linux</h2></div></a></article><article><a href=/en/archives/81/><div class=article-details><h2 class=article-title>Linux Learning Chapter 7: Writing Simple Shell Scripts</h2></div></a></article><article><a href=/en/archives/79/><div class=article-details><h2 class=article-title>Linux Learning Chapter 6: Managing Running Processes</h2></div></a></article></div></div></aside><script src=//cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.all.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-submit-action-icon,.twikoo .tk-time,.twikoo .tk-comments-no,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send{color:var(--twikoo-body-text-color-main)}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.twikoo .el-input__count{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://twikoo-jade-one.vercel.app/",el:"#tcomment"})</script><footer class=site-footer><section class=copyright>&copy;
2021 -
2026 <a href=https://blog.yexca.net target=_blank class=link rel=noopener>yexca</a></section><section class=powerby><p><span id=htmer_time style=color:var(--themecolor)></span></p><img src=https://count.getloli.com/@yexca><p>Visits Since 2025-02-28</p>Built with <a href=https://gohugo.io/ target=_blank class=link rel=noopener>Hugo</a> <span>|</span>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank class=link rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank class=link rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>function secondToDate(e){if(!e)return 0;var t=new Array(0,0,0,0,0);return e>=365*24*3600&&(t[0]=parseInt(e/(365*24*3600)),e%=365*24*3600),e>=24*3600&&(t[1]=parseInt(e/(24*3600)),e%=24*3600),e>=3600&&(t[2]=parseInt(e/3600),e%=3600),e>=60&&(t[3]=parseInt(e/60),e%=60),e>0&&(t[4]=e),t}</script><script type=text/javascript language=javascript>function setTime(){var e=Math.round(new Date(Date.UTC(2021,10,6,14,15,19)).getTime()/1e3),t=Math.round(((new Date).getTime()+8*60*60*1e3)/1e3);currentTime=secondToDate(t-e),currentTimeHtml="This blog has been running for "+currentTime[0]+" years "+currentTime[1]+" days "+currentTime[2]+" hours "+currentTime[3]+" minutes "+currentTime[4]+" seconds",document.getElementById("htmer_time").innerHTML=currentTimeHtml}setInterval(setTime,1e3)</script></body></html>